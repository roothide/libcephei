#!/bin/sh
set -e

# Install defaults alternative. This is used so Procursus’s defaults package has higher priority
# over Cephei’s defaults, maintaining compatibility.
if [ "$1" = "configure" ]; then
	update-alternatives --install @THEOS_PACKAGE_INSTALL_PREFIX@/usr/bin/defaults defaults @THEOS_PACKAGE_INSTALL_PREFIX@/usr/bin/hbprefs 30
fi

# Tell the package manager to restart system app (SpringBoard) after installation.
if ! [ -z "$CYDIA" ]; then
	read -r fd ver <<EOT
$CYDIA
EOT
	if [ "$ver" -ge 1 ]; then
		echo "finish:restart" >&$fd
	fi
fi

exit 0
